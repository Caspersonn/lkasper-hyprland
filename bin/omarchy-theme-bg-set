#!/usr/bin/env bash

# Sets the specified image as the current background

if [[ -z $1 ]]; then
  echo "Usage: omarchy-theme-bg-set <path-to-image>" >&2
  exit 1
fi

BACKGROUND="$1"
CURRENT_BACKGROUND_LINK="$HOME/.config/omarchy/current/background"

# Create symlink to the new background
ln -nsf "$BACKGROUND" "$CURRENT_BACKGROUND_LINK"
ln -nsf "$BACKGROUND" "$HOME/.config/omarchy/current/wallpaper"

pkill -x swaybg
setsid uwsm-app -- swaybg -i "$CURRENT_BACKGROUND_LINK" -m fill >/dev/null 2>&1 &
